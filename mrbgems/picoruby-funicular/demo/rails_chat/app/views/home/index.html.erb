<div id="app"></div>

<script type="text/ruby" src="/models/user.rb"></script>
<script type="text/ruby" src="/models/session.rb"></script>
<script type="text/ruby" src="/models/channel.rb"></script>
<script type="text/ruby" src="/application.rb"></script>
<!--<script type="application/x-mrb" src="/application.mrb"></script>-->

<script type="text/ruby">
puts "Funicular Chat App initializing..."

# Load all model schemas before starting the app
Funicular.load_schemas({ User => "user", Session => "session", Channel => "channel" }) do
  # Start the application after all schemas are loaded
  Funicular.start(container: 'app') do |router|
    router.add_route('/login', LoginComponent)
    router.add_route('/chat', ChatComponent)
    router.add_route('/settings', SettingsComponent)
    router.set_default('/login')
  end
end
</script>
