<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= config['site_title'] || 'PicoRuby Buddie Blog' %></title>
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="stylesheet" href="/assets/prism.css">
    <script>
      (function() {
        const theme = localStorage.getItem('theme') ||
          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.classList.toggle('dark', theme === 'dark');
      })();
    </script>
  </head>
  <body class="bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 min-h-screen transition-colors">
    <div class="max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
      <header class="mb-12">
        <div class="text-center mb-8">
          <h1 class="text-5xl font-bold mb-3">
            <a href="./" class="gradient-text hover:opacity-80 transition-opacity">
              <%= config['site_title'] || 'My PicoRuby Blog' %>
            </a>
          </h1>
          <p class="text-slate-600 dark:text-slate-300 text-lg">
            <%= config['site_description'] || 'A blog generated by picoruby-buddie' %>
          </p>
        </div>
        <nav class="flex justify-center items-center gap-6 text-sm">
          <a href="/" class="text-slate-600 dark:text-slate-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors font-medium">
            Home
          </a>
          <a href="/about" class="text-slate-600 dark:text-slate-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors font-medium">
            About
          </a>
          <button id="theme-toggle" class="ml-4 p-2 rounded-lg bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors" aria-label="Toggle theme">
            <svg id="theme-icon-light" class="w-5 h-5 text-slate-800 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
            <svg id="theme-icon-dark" class="w-5 h-5 text-slate-800 dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
          </button>
        </nav>
      </header>

      <main id="content" class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-8 mb-12 min-h-[400px] transition-colors">
        <div class="flex items-center justify-center h-64">
          <div class="text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"></div>
            <p class="text-slate-500 dark:text-slate-400">Loading...</p>
          </div>
        </div>
      </main>

      <footer class="text-center text-slate-600 dark:text-slate-300 text-sm py-8 border-t border-slate-200 dark:border-slate-700 transition-colors">
        <p class="mb-2">Powered by <span class="font-semibold text-purple-600 dark:text-purple-400">PicoRuby.wasm</span></p>
        <p class="text-xs text-slate-500 dark:text-slate-400">Built with Buddie "Hybrid" Site Generator</p>
      </footer>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
          themeToggle.addEventListener('click', function() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            html.classList.toggle('dark', !isDark);
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
          });
        }

        // Open external links in new tab
        var links = document.querySelectorAll("a[href^='http']:not([href*='" + window.location.hostname + "'])");
        links.forEach(function(link) {
          link.setAttribute('target', '_blank');
          link.setAttribute('rel', 'noopener noreferrer');
        });
      });
    </script>
    <script src="/assets/prism-bundle.js"></script>
    <script src="/init.iife.js"></script>
    <script type="text/ruby">
      require 'buddie'
      Buddie.run
    </script>
  </body>
</html>
